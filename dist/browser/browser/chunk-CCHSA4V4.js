import{a as j}from"./chunk-XRI5E3UN.js";import{$ as p,A as o,B as g,Ba as w,E,I as c,L as s,La as F,Na as R,Oa as L,P as r,Q as t,Qa as T,R as v,U as O,V as P,W as d,_ as a,aa as l,ga as x,ha as _,ja as u,ka as f,la as M,q as C,r as h,va as D,wa as I,xa as y,ya as S,z as b,za as k}from"./chunk-2HLR5FGF.js";var A=()=>["/eventos"],B=i=>({tipo:i});function q(i,n){if(i&1&&(r(0,"li",26)(1,"a",13),a(2),u(3,"uppercase"),t()()),i&2){let e=n.$implicit;o(),s("routerLink",x(5,A))("queryParams",_(6,B,e.tipo)),o(),l(" ",f(3,3,e.nombre)," ")}}function V(i,n){if(i&1&&(r(0,"div",27)(1,"h4"),a(2),t(),v(3,"img",28),r(4,"p"),a(5),t(),r(6,"a",29),a(7),t()()),i&2){let e=n.$implicit,m=d(2);o(2),p(e.titulo),o(),s("src",m.getImagenUrl(e.imagen),b)("alt",e.titulo),o(2),p(e.descripcion),o(),s("routerLink",e.link),o(),p(e.boton)}}function U(i,n){if(i&1&&v(0,"img",30),i&2){let e=d(2);s("src",e.getImagenUrl(e.evento.imagenUrl),b)("alt",e.evento.titulo)}}function W(i,n){i&1&&(r(0,"p")(1,"strong"),a(2,"\u{1F4B6} Evento de pago"),t()())}function $(i,n){i&1&&(r(0,"p")(1,"strong"),a(2,"\u{1F31F} Evento destacado"),t()())}function Q(i,n){if(i&1&&(r(0,"span"),a(1),t()),i&2){let e=d(2);o(),p(e.asistentesResumen)}}function Y(i,n){if(i&1){let e=O();r(0,"button",31),P("click",function(){C(e);let N=d(2);return h(N.apuntarse())}),a(1," \u{1F64B} Apuntarme al evento "),t()}}function G(i,n){i&1&&(r(0,"button",32),a(1," \u2705 Ya est\xE1s inscrito "),t())}function H(i,n){if(i&1&&(r(0,"div",1)(1,"div",2)(2,"aside",3)(3,"h3"),a(4,"Eventos"),t(),r(5,"ul",4),c(6,q,4,8,"li",5),t(),c(7,V,8,6,"div",6),t(),r(8,"div",7)(9,"nav",8)(10,"ol",9)(11,"li",10)(12,"a",11),a(13,"\u{1F3E0} Inicio"),t()(),r(14,"li",10)(15,"a",12),a(16,"Eventos"),t()(),r(17,"li",10)(18,"a",13),a(19),u(20,"titlecase"),t()(),r(21,"li",14),a(22),t()()(),r(23,"div",15),c(24,U,1,2,"img",16),t(),r(25,"div",17)(26,"h2",18),a(27),t(),r(28,"p")(29,"strong"),a(30,"\u{1F4C5} Fecha:"),t(),a(31),u(32,"date"),t(),r(33,"p")(34,"strong"),a(35,"\u{1F4CD} Lugar:"),t(),a(36),t(),r(37,"p")(38,"strong"),a(39,"\u{1F9E9} Tipo:"),t(),a(40),u(41,"titlecase"),t(),c(42,W,3,0,"p",19)(43,$,3,0,"p",19),v(44,"hr"),r(45,"h5",20),a(46,"\u{1F4DD} Descripci\xF3n"),t(),r(47,"p",21),a(48),t(),r(49,"p",22)(50,"strong"),a(51,"\u{1F465} Asistentes: "),t(),c(52,Q,2,1,"span",19),t(),r(53,"div",23),c(54,Y,2,0,"button",24)(55,G,2,0,"button",25),t()()()()()),i&2){let e=d();o(6),s("ngForOf",e.categorias),o(),s("ngForOf",e.tarjetasInformativas),o(11),s("routerLink",x(24,A))("queryParams",_(25,B,e.evento==null?null:e.evento.tipoEvento)),o(),l(" ",f(20,17,e.evento==null?null:e.evento.tipoEvento)," "),o(3),p(e.evento==null?null:e.evento.titulo),o(2),s("ngIf",e.evento==null?null:e.evento.imagenUrl),o(3),l(" \u{1F389} ",e.evento.titulo," "),o(4),l(" ",M(32,19,e.evento.fecha,"longDate"),""),o(5),l(" ",e.evento.lugar,""),o(4),l(" ",f(41,22,e.evento.tipoEvento),""),o(2),s("ngIf",e.evento.esDePago),o(),s("ngIf",e.evento.destacado),o(5),p(e.evento.descripcion),o(4),s("ngIf",e.asistentesResumen),o(2),s("ngIf",!e.evento.yaInscrito),o(),s("ngIf",e.evento.yaInscrito)}}var z=class i{constructor(n,e,m){this.route=n;this.eventService=e;this.router=m}evento=null;isLoggedIn=!1;asistentesResumen="";asistentesNombres=[];categorias=[{tipo:"celebraciones",nombre:" Celebraciones",descripcion:"Fiestas y aniversarios perrunos",imagen:"uploads/celebraciones.png"},{tipo:"concursos",nombre:" Concursos",descripcion:"Competiciones y talentos caninos",imagen:"uploads/concurso.png"},{tipo:"solidarios",nombre:" Solidarios",descripcion:"Eventos ben\xE9ficos y de ayuda",imagen:"uploads/solidarios.png"},{tipo:"talleres",nombre:" Talleres",descripcion:"Aprende y divi\xE9rtete con tu mascota",imagen:"uploads/talleres.png"},{tipo:"quedadas",nombre:" Quedadas",descripcion:"Paseos, grupos y socializaci\xF3n",imagen:"uploads/quedadas.jpeg"},{tipo:"miscelanea",nombre:" Miscel\xE1nea",descripcion:"Otros eventos y actividades variadas",imagen:"uploads/miscelanea.png"}];tarjetasInformativas=[{titulo:"\xBFC\xF3mo participar?",imagen:"uploads/quedadas.jpeg",descripcion:"Descubre c\xF3mo formar parte de los eventos caninos.",link:"/eventos",boton:"Ver m\xE1s"},{titulo:"\xDAnete a la comunidad",imagen:"uploads/comunidad.png",descripcion:"Reg\xEDstrate y accede a todos los beneficios.",link:"/registro",boton:"Registrarse"},{titulo:"Eventos solidarios",imagen:"uploads/solidarios.png",descripcion:"Apoya causas ben\xE9ficas y de ayuda animal.",link:"/eventos",boton:"Ver solidarios"}];ngOnInit(){this.isLoggedIn=!!localStorage.getItem("auth_token");let n=this.route.snapshot.paramMap.get("id");n&&(this.eventService.getEventoPorId(+n).subscribe({next:e=>this.evento=e,error:e=>console.error("Error al cargar evento:",e)}),this.eventService.getAsistentesEvento(+n).subscribe({next:e=>{this.asistentesResumen=e.resumen,this.asistentesNombres=e.nombres},error:e=>console.error("Error al obtener asistentes:",e)}))}getImagenUrl(n){if(!n)return"assets/images/eventos/default.jpg";let e=n.startsWith("/")?n:"/"+n;return n.startsWith("http")?n:"http://localhost:8080"+e}apuntarse(){if(this.evento){if(!this.isLoggedIn){this.irALogin();return}this.eventService.apuntarseAEvento(this.evento).subscribe({next:n=>{this.evento.yaInscrito=!0,this.evento.apuntados=(this.evento.apuntados||0)+1,alert(n.mensaje)},error:n=>{console.error("\u274C Error al apuntarse:",n),alert("\u26A0\uFE0F Ocurri\xF3 un error al apuntarte. Revisa tu conexi\xF3n o inicia sesi\xF3n de nuevo.")}})}}irALogin(){alert("\u{1F512} Necesitas iniciar sesi\xF3n para apuntarte a un evento."),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||i)(g(F),g(j),g(R))};static \u0275cmp=E({type:i,selectors:[["app-detalle-evento"]],decls:1,vars:1,consts:[["class","container mt-4 detalle-evento-container",4,"ngIf"],[1,"container","mt-4","detalle-evento-container"],[1,"row","d-flex","align-items-start"],[1,"col-12","col-md-3","col-lg-2","sidebar-left"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["class","info-card",4,"ngFor","ngForOf"],[1,"col-12","col-md-9","col-lg-10","d-flex","flex-column"],["aria-label","breadcrumb",1,"breadcrumb-container","mb-4"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/eventos"],[3,"routerLink","queryParams"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-center"],["class","imagen-detalle-evento",3,"src","alt",4,"ngIf"],[1,"detalle-evento-info","p-4","rounded","border","border-success","bg-white","shadow-sm"],[1,"text-center","mb-4","text-success"],[4,"ngIf"],[1,"text-success"],[1,"text-muted"],[1,"mt-3"],[1,"text-center","mt-4"],["class","btn btn-success btn-lg",3,"click",4,"ngIf"],["class","btn btn-outline-success btn-lg","disabled","",4,"ngIf"],[1,"list-group-item"],[1,"info-card"],[1,"img-fluid","rounded","mb-2",3,"src","alt"],[1,"btn","btn-secondary",3,"routerLink"],[1,"imagen-detalle-evento",3,"src","alt"],[1,"btn","btn-success","btn-lg",3,"click"],["disabled","",1,"btn","btn-outline-success","btn-lg"]],template:function(e,m){e&1&&c(0,H,56,27,"div",0),e&2&&s("ngIf",m.evento)},dependencies:[w,D,I,S,y,k,T,L],styles:[".breadcrumb-container[_ngcontent-%COMP%]{padding:10px 15px!important;border-radius:8px!important;margin-bottom:20px!important}.breadcrumb[_ngcontent-%COMP%]{margin-bottom:0!important;padding:0!important;background:transparent!important}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:var(--primary-green)!important;font-weight:600!important;transition:color .3s ease!important}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--naranja-intenso)!important;text-decoration:underline!important}.breadcrumb-item.active[_ngcontent-%COMP%]{color:var(--verde-profundo)!important;font-weight:700!important}.sidebar-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidebar-right[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--verde-profundo)!important;font-size:1.8rem!important;text-align:center!important;font-weight:700!important;text-transform:uppercase!important;margin-top:30px!important;margin-bottom:10px!important;text-decoration:underline!important;text-decoration-color:var(--naranja-intenso)!important}.sidebar-left[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important;overflow:hidden!important;color:#e67b11!important;font-size:1.8rem!important;text-align:center!important;font-weight:700!important;text-transform:uppercase!important;margin-top:30px!important;margin-bottom:10px!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#e67b11!important;font-weight:700!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff9800!important;text-decoration:underline!important}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:15px;border:6px solid #3B8024;text-align:center;margin-top:20px}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:5px}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-top:10px;color:#065f43}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#555}.sidebar-left[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#63af71;color:#fff}.sidebar-left[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#055f43}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%], .sidebar-right[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:#f3f6f3!important;color:#fff!important;font-size:1.2rem!important;font-weight:500!important;padding:15px 20px!important;display:flex!important;align-items:center!important;gap:10px!important;transition:background .3s ease-in-out!important;border-radius:15px;border:6px solid #3B8024;cursor:pointer!important;justify-content:center!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover, .sidebar-right[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{background:var(--verde-profundo)!important;transform:scale(1.05)!important}.sidebar-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:15px;border:6px solid #3B8024;text-align:center;margin-bottom:15px}.info-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:5px}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-top:10px;color:#065f43}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#555}.imagen-detalle-evento[_ngcontent-%COMP%]{max-width:400px;width:100%;height:auto;display:block;margin:40px auto 20px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.detalle-evento-info[_ngcontent-%COMP%]{max-width:800px;margin:0 auto 40px;background-color:#fff!important;padding:30px!important;border:4px solid var(--verde-profundo)!important;border-radius:20px!important;box-shadow:0 4px 12px #0000001a!important}.btn-success[_ngcontent-%COMP%], .btn-outline-success[_ngcontent-%COMP%]{font-size:1.1rem;padding:10px 25px;border-radius:8px}.btn-outline-success[_ngcontent-%COMP%]{background-color:#fff;color:var(--verde-profundo);border:2px solid var(--verde-profundo)}"]})};export{z as DetalleEventoComponent};
