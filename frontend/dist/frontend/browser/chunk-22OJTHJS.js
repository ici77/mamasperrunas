import{a as A,b as Q,d as G,e as J,f as K,g as X,h as Y,k as Z,l as H,m as $,n as ee,p as te}from"./chunk-W23QQOBK.js";import{a as ne}from"./chunk-XRI5E3UN.js";import{$ as w,A as l,B as y,Ba as j,E as F,I as M,L as v,Na as R,Oa as U,P as o,Q as n,Qa as q,R as x,U as D,V as O,W as S,_ as r,aa as V,ca as f,da as C,ea as b,ga as I,ha as W,ja as T,ka as B,q as m,r as p,va as L,wa as N,ya as z,z as P}from"./chunk-2HLR5FGF.js";var ie=()=>["/eventos"],re=c=>({tipo:c});function ae(c,a){if(c&1&&(o(0,"li",37)(1,"a",38),r(2),T(3,"uppercase"),n()()),c&2){let i=a.$implicit;l(),v("routerLink",I(5,ie))("queryParams",W(6,re,i.tipo)),l(),V(" ",B(3,3,i.nombre)," ")}}function le(c,a){if(c&1&&(o(0,"div",39)(1,"h4"),r(2),n(),x(3,"img",40),o(4,"p"),r(5),n(),o(6,"a",41),r(7),n()()),c&2){let i=a.$implicit,e=S();l(2),w(i.titulo),l(),v("src",e.getImagenUrl(i.imagen),P)("alt",i.titulo),l(2),w(i.descripcion),l(),v("routerLink",i.link),l(),w(i.boton)}}function de(c,a){if(c&1&&(o(0,"div",42)(1,"label",14),r(2,"Vista previa:"),n(),x(3,"br")(4,"img",43),n()),c&2){let i=S();l(4),v("src",i.imagenPreviewUrl,P)}}var oe=class c{constructor(a,i){this.eventService=a;this.router=i}nuevoEvento={titulo:"",descripcion:"",fecha:"",lugar:"",esDePago:!1,imagenUrl:"",tipoEvento:"",destacado:!1};categorias=[{tipo:"celebraciones",nombre:" Celebraciones",descripcion:"Fiestas y aniversarios perrunos",imagen:"uploads/celebraciones.png"},{tipo:"concursos",nombre:" Concursos",descripcion:"Competiciones y talentos caninos",imagen:"uploads/concurso.png"},{tipo:"solidarios",nombre:" Solidarios",descripcion:"Eventos ben\xE9ficos y de ayuda",imagen:"uploads/solidarios.png"},{tipo:"talleres",nombre:" Talleres",descripcion:"Aprende y divi\xE9rtete con tu mascota",imagen:"uploads/talleres.png"},{tipo:"quedadas",nombre:"Quedadas",descripcion:"Paseos, grupos y socializaci\xF3n",imagen:"uploads/quedadas.jpeg"},{tipo:"miscelanea",nombre:" Miscel\xE1nea",descripcion:"Otros eventos y actividades variadas",imagen:"uploads/miscelanea.png"}];tarjetasInformativas=[{titulo:"\xBFC\xF3mo participar?",imagen:"uploads/quedadas.jpeg",descripcion:"Descubre c\xF3mo formar parte de los eventos caninos.",link:"/eventos",boton:"Ver m\xE1s"},{titulo:"\xDAnete a la comunidad",imagen:"uploads/comunidad.png",descripcion:"Reg\xEDstrate y accede a todos los beneficios.",link:"/registro",boton:"Registrarse"},{titulo:"Eventos solidarios",imagen:"uploads/solidarios.png",descripcion:"Apoya causas ben\xE9ficas y de ayuda animal.",link:"/eventos",boton:"Ver solidarios"}];crearEvento(){if(!this.nuevoEvento.titulo||!this.nuevoEvento.fecha||!this.nuevoEvento.tipoEvento){alert("\u26A0\uFE0F T\xEDtulo, fecha y tipo de evento son obligatorios");return}let a=new FormData;a.append("evento",new Blob([JSON.stringify(this.nuevoEvento)],{type:"application/json"})),this.imagenSeleccionada&&a.append("imagen",this.imagenSeleccionada),this.eventService.crearEventoConImagen(a).subscribe({next:()=>{alert("\u2705 Evento creado correctamente"),this.router.navigate(["/eventos"])},error:i=>{console.error("\u274C Error al crear evento",i),alert("\u26A0\uFE0F Error al crear el evento")}})}imagenPreviewUrl=null;imagenSeleccionada;onFileSelected(a){let i=a.target.files[0];i&&this.resizeImage(i,800,600).then(e=>{let s=i.name.replace(/\.[^/.]+$/,""),d=new File([e],`${s}_resized.jpg`,{type:"image/jpeg"});this.imagenSeleccionada=d;let t=new FileReader;t.onload=h=>{this.imagenPreviewUrl=h.target.result},t.readAsDataURL(d)}).catch(e=>{console.error("\u274C Error al redimensionar imagen:",e),alert("No se pudo procesar la imagen")})}getImagenUrl(a){return a?a.startsWith("http")?a:`http://localhost:8080/${a}`:""}resizeImage(a,i,e){return new Promise((s,d)=>{let t=new FileReader;t.onload=h=>{let _=new Image;_.src=h.target.result,_.onload=()=>{let E=document.createElement("canvas"),g=_.width,u=_.height;(g>i||u>e)&&(g>u?(u=Math.round(u*=i/g),g=i):(g=Math.round(g*=e/u),u=e)),E.width=g,E.height=u,E.getContext("2d")?.drawImage(_,0,0,g,u),E.toBlob(k=>{k?s(k):d(new Error("No se pudo convertir la imagen"))},"image/jpeg",.8)}},t.onerror=h=>d(h),t.readAsDataURL(a)})}static \u0275fac=function(i){return new(i||c)(y(ne),y(R))};static \u0275cmp=F({type:c,selectors:[["app-crear-evento"]],decls:66,vars:10,consts:[["form","ngForm"],[1,"container-fluid"],[1,"row","d-flex","align-items-start"],[1,"col-12","col-md-3","col-lg-2","sidebar-left"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["class","info-card",4,"ngFor","ngForOf"],[1,"col-12","col-md-8","col-lg-9","d-flex","flex-column"],[1,"text-center","w-100",2,"margin-top","40px","margin-bottom","20px"],["src","assets/images/eventos/creaevento.png","alt","Crear evento",1,"img-fluid","rounded","shadow-sm",2,"max-width","400px","height","auto"],[1,"formulario-crear-evento","w-100",2,"max-width","600px"],[1,"mb-4","text-center"],[1,"p-4","border","border-success","rounded","bg-white","shadow-sm",3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","name","titulo","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","descripcion","rows","4",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","fecha","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lugar",1,"form-control",3,"ngModelChange","ngModel"],["name","tipoEvento","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","celebraciones"],["value","concursos"],["value","solidarios"],["value","talleres"],["value","quedadas"],["value","miscelanea"],["type","file",1,"form-control",3,"change"],["class","mt-3",4,"ngIf"],[1,"form-check","mb-3"],["type","checkbox","name","esDePago","id","esDePagoCheck",1,"form-check-input",3,"ngModelChange","ngModel"],["for","esDePagoCheck",1,"form-check-label"],[1,"form-check","mb-4"],["type","checkbox","name","destacado","id","destacadoCheck",1,"form-check-input",3,"ngModelChange","ngModel"],["for","destacadoCheck",1,"form-check-label"],[1,"text-center"],["type","submit",1,"btn","btn-success"],[1,"list-group-item"],[3,"routerLink","queryParams"],[1,"info-card"],[3,"src","alt"],[1,"btn","btn-secondary",3,"routerLink"],[1,"mt-3"],["alt","Vista previa",1,"img-thumbnail","rounded","shadow-sm",2,"max-width","150px","height","auto",3,"src"]],template:function(i,e){if(i&1){let s=D();o(0,"div",1)(1,"div",2)(2,"aside",3)(3,"h3"),r(4,"Eventos"),n(),o(5,"ul",4),M(6,ae,4,8,"li",5),n(),M(7,le,8,6,"div",6),n(),o(8,"div",7)(9,"div",8),x(10,"img",9),n(),o(11,"div",10)(12,"h2",11),r(13,"\u{1F389} Crea tu evento"),n(),o(14,"form",12,0),O("ngSubmit",function(){return m(s),p(e.crearEvento())}),o(16,"div",13)(17,"label",14),r(18,"T\xEDtulo"),n(),o(19,"input",15),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.titulo,t)||(e.nuevoEvento.titulo=t),p(t)}),n()(),o(20,"div",13)(21,"label",14),r(22,"Descripci\xF3n"),n(),o(23,"textarea",16),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.descripcion,t)||(e.nuevoEvento.descripcion=t),p(t)}),n()(),o(24,"div",13)(25,"label",14),r(26,"Fecha"),n(),o(27,"input",17),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.fecha,t)||(e.nuevoEvento.fecha=t),p(t)}),n()(),o(28,"div",13)(29,"label",14),r(30,"Lugar"),n(),o(31,"input",18),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.lugar,t)||(e.nuevoEvento.lugar=t),p(t)}),n()(),o(32,"div",13)(33,"label",14),r(34,"Tipo de evento"),n(),o(35,"select",19),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.tipoEvento,t)||(e.nuevoEvento.tipoEvento=t),p(t)}),o(36,"option",20),r(37,"Seleccione..."),n(),o(38,"option",21),r(39,"\u{1F389} Celebraciones"),n(),o(40,"option",22),r(41,"\u{1F3C6} Concursos"),n(),o(42,"option",23),r(43,"\u2764\uFE0F Solidarios"),n(),o(44,"option",24),r(45,"\u{1F9E0} Talleres"),n(),o(46,"option",25),r(47,"\u{1F333} Quedadas"),n(),o(48,"option",26),r(49,"\u{1F9E9} Miscel\xE1nea"),n()()(),o(50,"div",13)(51,"label",14),r(52,"Imagen del evento"),n(),o(53,"input",27),O("change",function(t){return m(s),p(e.onFileSelected(t))}),n(),M(54,de,5,1,"div",28),n(),o(55,"div",29)(56,"input",30),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.esDePago,t)||(e.nuevoEvento.esDePago=t),p(t)}),n(),o(57,"label",31),r(58,"\xBFEs de pago?"),n()(),o(59,"div",32)(60,"input",33),b("ngModelChange",function(t){return m(s),C(e.nuevoEvento.destacado,t)||(e.nuevoEvento.destacado=t),p(t)}),n(),o(61,"label",34),r(62,"\xBFEvento destacado?"),n()(),o(63,"div",35)(64,"button",36),r(65,"\u2705 Crear evento"),n()()()()()()()}i&2&&(l(6),v("ngForOf",e.categorias),l(),v("ngForOf",e.tarjetasInformativas),l(12),f("ngModel",e.nuevoEvento.titulo),l(4),f("ngModel",e.nuevoEvento.descripcion),l(4),f("ngModel",e.nuevoEvento.fecha),l(4),f("ngModel",e.nuevoEvento.lugar),l(4),f("ngModel",e.nuevoEvento.tipoEvento),l(19),v("ngIf",e.imagenPreviewUrl),l(2),f("ngModel",e.nuevoEvento.esDePago),l(4),f("ngModel",e.nuevoEvento.destacado))},dependencies:[j,L,N,z,te,Y,H,$,Q,A,Z,G,J,ee,X,K,q,U],styles:[".breadcrumb-container[_ngcontent-%COMP%]{padding:10px 15px!important;border-radius:8px!important;margin-bottom:20px!important}.breadcrumb[_ngcontent-%COMP%]{margin-bottom:0!important;padding:0!important;background:transparent!important}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:var(--primary-green)!important;font-weight:600!important;transition:color .3s ease!important}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--naranja-intenso)!important;text-decoration:underline!important}.breadcrumb-item.active[_ngcontent-%COMP%]{color:var(--verde-profundo)!important;font-weight:700!important}.sidebar-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidebar-right[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--verde-profundo)!important;font-size:1.8rem!important;text-align:center!important;font-weight:700!important;text-transform:uppercase!important;margin-top:30px!important;margin-bottom:10px!important;text-decoration:underline!important;text-decoration-color:var(--naranja-intenso)!important}.sidebar-left[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important;overflow:hidden!important;color:#e67b11!important;font-size:1.8rem!important;text-align:center!important;font-weight:700!important;text-transform:uppercase!important;margin-top:30px!important;margin-bottom:10px!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#e67b11!important;font-weight:700!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff9800!important;text-decoration:underline!important}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:15px;border:6px solid #3B8024;text-align:center;margin-top:20px}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:5px}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-top:10px;color:#065f43}.sidebar-left[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#555}.sidebar-left[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#63af71;color:#fff}.sidebar-left[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#055f43}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%], .sidebar-right[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:#f3f6f3!important;color:#fff!important;font-size:1.2rem!important;font-weight:500!important;padding:15px 20px!important;display:flex!important;align-items:center!important;gap:10px!important;transition:background .3s ease-in-out!important;border-radius:15px;border:6px solid #3B8024;cursor:pointer!important;justify-content:center!important}.sidebar-left[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover, .sidebar-right[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{background:var(--verde-profundo)!important;transform:scale(1.05)!important}.sidebar-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:15px;border:6px solid #3B8024;text-align:center;margin-bottom:15px}.info-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:5px}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-top:10px;color:#065f43}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#555}.crear-evento-header[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:50px auto 20px;display:block;border-radius:15px;max-height:240px;object-fit:cover}.formulario-crear-evento[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:6px solid var(--verde-profundo);border-radius:20px;background-color:#fff;padding:30px}.formulario-crear-evento[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-top:10px}.preview-image[_ngcontent-%COMP%]{max-width:180px;height:auto;border-radius:5px;margin-top:10px;box-shadow:0 0 5px #00000026}.btn-crear-evento[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:var(--verde-profundo);color:#fff;border:none;padding:10px 25px;border-radius:6px;font-size:1.2rem;transition:background .3s ease}.btn-crear-evento[_ngcontent-%COMP%]:hover{background-color:#2e5e1c;transform:scale(1.05)}"]})};export{oe as CrearEventoComponent};
