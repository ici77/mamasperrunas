<h2>{{ categoryName }}</h2>

<!-- Bot贸n para crear un nuevo post (Solo para usuarios registrados) -->
<div *ngIf="isLoggedIn" class="create-post-container">
  <button class="create-post-btn" (click)="goToCreatePost()">
    锔 Crear nuevo post
  </button>
</div>

<!-- Mensaje para invitados -->
<div *ngIf="!isLoggedIn" class="guest-message">
  <p> Debes <a routerLink="/registro">registrarte</a> o <a routerLink="/login">iniciar sesi贸n</a> para publicar o responder posts.</p>
</div>

<!-- Secci贸n de posts destacados -->
<h3> Posts Destacados</h3>
<div *ngIf="topPosts.length > 0">
  <div *ngFor="let post of topPosts" class="post">
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
    <small> {{ post.upvotes }} | Publicado por {{ post.user.name }} el {{ post.createdAt | date:'short' }}</small>

    <!-- Bot贸n para responder (Solo usuarios autenticados) -->
    <button *ngIf="isLoggedIn" (click)="goToReply(post.id)">Responder</button>
  </div>
</div>

<!-- Secci贸n de todos los posts con paginaci贸n -->
<h3> Todos los Posts</h3>
<div *ngIf="allPosts.length > 0">
  <div *ngFor="let post of allPosts" class="post">
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
    <small>Publicado por {{ post.user.name }} el {{ post.createdAt | date:'short' }}</small>

    <!-- Bot贸n para responder (Solo usuarios autenticados) -->
    <button *ngIf="isLoggedIn" (click)="goToReply(post.id)">Responder</button>
  </div>
</div>
<!-- Mostrar solo si el usuario est谩 autenticado -->
<button *ngIf="isLoggedIn" (click)="goToCreatePost()" class="btn btn-primary">
  Publicar Nuevo Post
</button>

<!-- Mostrar mensaje si el usuario no est谩 autenticado -->
<div *ngIf="!isLoggedIn">
  <p>Debes iniciar sesi贸n para publicar un post.</p>
  <a routerLink="/login">Iniciar sesi贸n</a>
</div>


<!-- Mensaje cuando no hay posts -->
<div *ngIf="allPosts.length === 0">
  <p>No hay posts en esta categor铆a a煤n.</p>
</div>

<!-- Controles de paginaci贸n -->
<div class="pagination-controls">
  <button (click)="previousPage()" [disabled]="currentPage === 0">猬锔 Anterior</button>
  <span>P谩gina {{ currentPage + 1 }} de {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="currentPage >= totalPages - 1">Siguiente ★</button>
</div>
