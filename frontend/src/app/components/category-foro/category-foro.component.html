<h2>{{ categoryName }}</h2>

<!-- SecciÃ³n para crear un nuevo post -->
<div class="create-post-container">
  <button *ngIf="isLoggedIn" class="create-post-btn" (click)="goToCreatePost()">
    âœï¸ Crear nuevo post
  </button>
  <div *ngIf="!isLoggedIn" class="guest-message">
    <p>ğŸ”’ <a routerLink="/registro">RegÃ­strate</a> o <a routerLink="/login">inicia sesiÃ³n</a> para participar.</p>
  </div>
</div>

<!-- SecciÃ³n de Posts Destacados -->
<h3>ğŸ”¥ Posts Destacados</h3>
<div *ngIf="topPosts.length > 0; else noTopPosts">
  <div *ngFor="let post of topPosts" class="post post-highlight">
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
    <small>ğŸ‘ {{ post.upvotes }} | Publicado por {{ post.user.name }} el {{ post.createdAt | date:'short' }}</small>
    <button *ngIf="isLoggedIn" (click)="openPost(post.id)" class="btn btn-secondary">
      ğŸ’¬ Responder
    </button>
    
  </div>
</div>
<ng-template #noTopPosts>
  <p>No hay posts destacados en esta categorÃ­a.</p>
</ng-template>

<!-- SecciÃ³n de Todos los Posts -->
<h3>ğŸ“¢ Todos los Posts</h3>
<div *ngIf="allPosts.length > 0; else noPosts">
  <div *ngFor="let post of allPosts" class="post">
    <!-- âœ… TÃ­tulo del post ahora es un enlace -->
    <h3><a [routerLink]="['/post', post.id]" class="post-title">{{ post.title }}</a></h3>

    <p>{{ post.content }}</p>
    <small>Publicado por {{ post.user.name }} el {{ post.createdAt | date:'short' }}</small>

    <!-- âœ… BotÃ³n de responder redirige al post correctamente -->
    <a *ngIf="isLoggedIn" [routerLink]="['/post', post.id]" class="btn btn-primary">
      ğŸ’¬ Responder
    </a>
  </div>
</div>

<!-- Mensaje cuando no hay posts -->
<ng-template #noPosts>
  <p>No hay posts en esta categorÃ­a aÃºn.</p>
</ng-template>


<!-- Mensaje cuando no hay posts -->
<ng-template #noPosts>
  <p>No hay posts en esta categorÃ­a aÃºn.</p>
</ng-template>



<!-- Controles de PaginaciÃ³n -->
<div class="pagination-controls">
  <button (click)="previousPage()" [disabled]="currentPage === 0">â¬…ï¸ Anterior</button>
  <span>PÃ¡gina {{ currentPage + 1 }} de {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="currentPage >= totalPages - 1">Siguiente â¡ï¸</button>
</div>

<div class="post-container" *ngFor="let post of allPosts">
  <!-- âœ… Hacer clic en el tÃ­tulo redirige al post -->
  <h3 (click)="openPost(post.id)">{{ post.title }}</h3>

  <p>{{ post.content }}</p>

  <p>Publicado por el {{ post.createdAt }}</p>

  <!-- âœ… BotÃ³n de Responder tambiÃ©n abre el post -->
  <button (click)="openPost(post.id)" class="btn-responder">ğŸ’¬ Responder</button>
</div>

