<!-- BURBUJA flotante del asistente -->
<div class="chatbot-bubble" (click)="toggleChat()">
  <div class="chatbot-message" *ngIf="showWelcomeMessage">
    Hola, soy tu asistente. Â¿En quÃ© puedo ayudarte?
  </div>
  <img src="assets/images/default-avatar.png" alt="Asistente" class="avatar-icon" />
</div>

<!-- VENTANA emergente del chat -->
<div class="chatbot-window" *ngIf="isChatOpen">
  <div class="chatbot-header">
    ğŸ¾ Asistente virtual
    <span class="close-btn" (click)="toggleChat()">Ã—</span>
  </div>

  <div class="chatbot-messages">
    <!-- Saludo inicial si no se ha puesto nombre -->
    <div *ngIf="!usuarioNombre" class="bot">
      Â¡Hola! ğŸ˜Š Â¿CÃ³mo te llamas?
    </div>

    <!-- Saludo personalizado -->
    <div *ngIf="usuarioNombre && !saludoMostrado" class="bot">
      Encantado/a, {{ usuarioNombre }} ğŸ‘‹<br />
      Â¿Sobre quÃ© quieres saber mÃ¡s?
    </div>

    <!-- Ãndice visual con botones -->
    <div *ngIf="usuarioNombre" class="bot-buttons">
      <button (click)="respuestaDirecta('registro')">ğŸ“ Registro</button>
      <button (click)="respuestaDirecta('eventos')">ğŸ“… Eventos</button>
      <button (click)="respuestaDirecta('post')">ğŸ“° Posts</button>
      <button (click)="respuestaDirecta('perfil')">ğŸ‘¤ Perfil</button>
      <button (click)="respuestaDirecta('ayuda')">â“ Ayuda general</button>
    </div>

    <!-- Historial de mensajes -->
    <div *ngFor="let msg of messages" [ngClass]="msg.sender">
      {{ msg.text }}
    </div>
  </div>

  <!-- Campo de entrada -->
  <div class="chatbot-input">
    <input type="text" [(ngModel)]="userMessage" (keydown.enter)="sendMessage()" placeholder="Escribe tu mensaje..." />
    <button (click)="sendMessage()">Enviar</button>
  </div>
</div>
